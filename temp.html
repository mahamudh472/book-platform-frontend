<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Book Reader</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        #page-content {
            transform-origin: left;
        }

        .book-page {
            perspective: 1000px;
        }

        .page {
            transform-style: preserve-3d;
            transition: transform 0.6s;
        }

        .page.flipped {
            transform: rotateY(-180deg);
        }

        .page-content {
            backface-visibility: hidden;
            position: absolute;
            width: 100%;
            height: 100%;
        }

        .page-front {
            z-index: 2;
        }

        .page-back {
            transform: rotateY(180deg);
        }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen">
    <div id="book-container" class="border rounded-xl shadow-md max-w-lg mx-auto bg-white overflow-hidden relative">
        <!-- Cover -->
        <div id="cover-container" class="relative">
            <img class="mx-auto"
                 src="https://ds.rokomari.store/rokomari110/ProductNew20190903/260X372/Rich_Dad_Poor_Dad-Robert_T_Kiyosaki-a28a3-150615.jpg"
                 alt="Book Cover">
            <div class="absolute inset-0 flex items-end justify-center bg-gray-900 bg-opacity-50">
                <button id="read-now-btn" class="bg-blue-600 text-white px-6 py-2 m-4 rounded-lg hover:bg-blue-700">
                    Read Now
                </button>
            </div>
        </div>

        <!-- Reader -->
        <div id="reader-container" class="hidden p-6 relative max-h-[500px]">
            <div class="book-page">
                <div id="page-content" class="page bg-gray-100 p-6 rounded-lg shadow-md">
                    <div class="page-content page-front">
                        <p class="text-justify text-gray-800" id="page-text">
                            <!-- Front page content -->
                        </p>
                    </div>
                    <div class="page-content page-back bg-gray-200">
                        <p class="text-justify text-gray-800" id="page-back-text">
                            <!-- Back page content -->
                        </p>
                    </div>
                </div>
            </div>
            <div class="absolute bottom-4 left-4 flex items-center space-x-4">
                <button id="prev-btn" class="bg-blue-600 text-white px-3 py-1 rounded hover:bg-blue-700">Previous</button>
                <button id="next-btn" class="bg-blue-600 text-white px-3 py-1 rounded hover:bg-blue-700">Next</button>
            </div>
            <div class="absolute bottom-4 right-4 flex items-center space-x-2">
                <label for="page-number" class="text-gray-700">Jump to:</label>
                <input id="page-number" type="number" class="border rounded px-2 py-1 w-16 text-center" min="1" value="1">
            </div>
            <div class="absolute top-4 right-4 flex items-center space-x-2">
                <label for="ratio-selector" class="text-gray-700">Ratio:</label>
                <select id="ratio-selector" class="border rounded px-2 py-1">
                    <option value="1">1:1</option>
                    <option value="3/4">3:4</option>
                    <option value="16/9">16:9</option>
                </select>
            </div>
        </div>
    </div>

    <script>
        const coverContainer = document.getElementById('cover-container');
        const readerContainer = document.getElementById('reader-container');
        const readNowBtn = document.getElementById('read-now-btn');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const pageNumberInput = document.getElementById('page-number');
        const pageText = document.getElementById('page-text');
        const pageBackText = document.getElementById('page-back-text');
        const ratioSelector = document.getElementById('ratio-selector');
        const pageContent = document.getElementById('page-content');
        const totalPages = 10; // Example total pages
        let currentPage = 1;

        // Example book pages content
        const pagesContent = Array.from({ length: totalPages }, (_, i) => `This is the content of page ${i + 1}.`);

        // Show the reader when "Read Now" is clicked
        readNowBtn.addEventListener('click', () => {
            coverContainer.classList.add('hidden');
            readerContainer.classList.remove('hidden');
            loadPage(currentPage);
        });

        // Load the page content
        function loadPage(page) {
            if (page < 1 || page > totalPages) return;
            currentPage = page;
            pageNumberInput.value = currentPage;
            pageText.innerText = pagesContent[page - 1];
            pageBackText.innerText = `Back of page ${currentPage}`; // Example back content

            // Flip the page
            pageContent.classList.remove('flipped');
            setTimeout(() => {
                pageContent.classList.add('flipped');
            }, 100);
        }

        // Handle next and previous buttons
        nextBtn.addEventListener('click', () => loadPage(currentPage + 1));
        prevBtn.addEventListener('click', () => loadPage(currentPage - 1));

        // Handle direct page input
        pageNumberInput.addEventListener('change', () => {
            const page = parseInt(pageNumberInput.value);
            if (page >= 1 && page <= totalPages) {
                loadPage(page);
            }
        });

        // Handle ratio changes
        ratioSelector.addEventListener('change', (event) => {
            const ratio = event.target.value;
            const [width, height] = ratio.split('/').map(Number);
            const aspectRatio = height / width;
            readerContainer.style.aspectRatio = `${width} / ${height}`;
            readerContainer.style.height = `${readerContainer.offsetWidth * aspectRatio}px`;
        });
    </script>
</body>
</html>
